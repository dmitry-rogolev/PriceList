(function(){"use strict";var e={5569:function(e,t,n){var o=n(4870),a=n(9242),l=n(65),s=n(7387),r=n.n(s),u=n(2166),i=n(2483),c=n(7139),d=n(3396);const m={key:0,class:(0,c.C_)(["card","text-dark","p-0"])},p={class:"card-header"},h={class:(0,c.C_)(["card-title","text-center","mb-3"])},b={class:"card-body"},f={class:"table"},v=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"ID"),(0,d._)("th",null,"Название"),(0,d._)("th",null,"Единица измерения"),(0,d._)("th",null,"Цена"),(0,d._)("th",null,"Количество"),(0,d._)("th"),(0,d._)("th")])],-1),w={class:"mb-2"},C={class:"mb-2"},_={class:"mb-2"},g={class:"mb-2"},y=["onClick"],k={class:"mb-2"},S={class:"mb-2"},V={class:"mb-2"},W={class:"mb-2"};function x(e,t,n,o,a,l){const s=(0,d.up)("SearchComponent"),r=(0,d.up)("FlexComponent"),u=(0,d.up)("InputComponent"),i=(0,d.up)("ModalComponent"),x=(0,d.up)("SpinnerComponent");return(0,d.wg)(),(0,d.j4)(r,{classes:["justify-content-center","align-items-center","min-vh-100","bg-secondary","p-3"]},{default:(0,d.w5)((()=>[l.products?((0,d.wg)(),(0,d.iD)("div",m,[(0,d._)("div",p,[(0,d._)("h3",h,(0,c.zw)(l.header),1),(0,d.Wm)(r,{classes:"justify-content-center"},{default:(0,d.w5)((()=>[(0,d.Wm)(s)])),_:1})]),(0,d._)("div",b,[(0,d._)("table",f,[v,(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(l.products,(e=>((0,d.wg)(),(0,d.iD)("tr",{key:e.id,class:"text-center"},[(0,d._)("td",null,(0,c.zw)(e.id),1),(0,d._)("td",null,(0,c.zw)(e.name),1),(0,d._)("td",null,(0,c.zw)(e.measure),1),(0,d._)("td",null,(0,c.zw)(e.price),1),(0,d._)("td",null,(0,c.zw)(e.count),1),(0,d._)("td",null,[(0,d.Wm)(i,{buttonClasses:["btn-success","px-2"],onShow:t=>l.prepareChangeProduct(e),onSave:t=>l.change(e),title:"Редактировать",header:"Редактировать товар"},{button:(0,d.w5)((()=>[(0,d.Uk)(" ✍ ")])),window:(0,d.w5)((()=>[(0,d._)("div",w,[(0,d.Wm)(u,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e),name:"name",type:"text",placeholder:"Название",label:"Название",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",C,[(0,d.Wm)(u,{modelValue:a.measure,"onUpdate:modelValue":t[1]||(t[1]=e=>a.measure=e),name:"measure",type:"text",placeholder:"Единица измерения",label:"Единица измерения",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",_,[(0,d.Wm)(u,{modelValue:a.price,"onUpdate:modelValue":t[2]||(t[2]=e=>a.price=e),name:"price",type:"number",placeholder:"Цена",label:"Цена",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",g,[(0,d.Wm)(u,{modelValue:a.count,"onUpdate:modelValue":t[3]||(t[3]=e=>a.count=e),name:"count",type:"number",placeholder:"Количество",label:"Количество",autocomplete:"off"},null,8,["modelValue"])])])),_:2},1032,["onShow","onSave"])]),(0,d._)("td",null,[(0,d._)("button",{onClick:t=>l.remove(e),type:"button",class:(0,c.C_)(["btn","btn-danger"])},"✖",8,y)])])))),128))])]),(0,d.Wm)(r,{classes:"justify-content-center"},{default:(0,d.w5)((()=>[(0,d.Wm)(i,{buttonClasses:["btn-primary","px-3"],onSave:l.add,onShow:l.prepareAddProduct,title:"Добавить",header:"Добавить товар"},{button:(0,d.w5)((()=>[(0,d.Uk)(" + ")])),window:(0,d.w5)((()=>[(0,d._)("div",k,[(0,d.Wm)(u,{modelValue:a.name,"onUpdate:modelValue":t[4]||(t[4]=e=>a.name=e),name:"name",type:"text",placeholder:"Название",label:"Название",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",S,[(0,d.Wm)(u,{modelValue:a.measure,"onUpdate:modelValue":t[5]||(t[5]=e=>a.measure=e),name:"measure",type:"text",placeholder:"Единица измерения",label:"Единица измерения",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",V,[(0,d.Wm)(u,{modelValue:a.price,"onUpdate:modelValue":t[6]||(t[6]=e=>a.price=e),name:"price",type:"number",placeholder:"Цена",label:"Цена",autocomplete:"off"},null,8,["modelValue"])]),(0,d._)("div",W,[(0,d.Wm)(u,{modelValue:a.count,"onUpdate:modelValue":t[7]||(t[7]=e=>a.count=e),name:"count",type:"number",placeholder:"Количество",label:"Количество",autocomplete:"off"},null,8,["modelValue"])])])),_:1},8,["onSave","onShow"])])),_:1})])])):((0,d.wg)(),(0,d.j4)(x,{key:1,classes:"text-light"}))])),_:1})}var $={name:"WelcomeComponent",computed:{header(){return this.$store.state.header},products(){return this.$store.state.products},token(){return this.$store.state.token}},data(){return{name:null,measure:null,price:null,count:null}},methods:{async add(){let e=await r().ajax({url:"/product/add",method:"POST",data:{_token:this.token,name:this.name,measure:this.measure,price:this.price,count:this.count},headers:{"X-CSRF-TOKEN":this.token}});this.$store.commit("products",e.products),this.name=null,this.measure=null,this.price=null,this.count=null},prepareAddProduct(){this.name=null,this.measure=null,this.price=null,this.count=null},prepareChangeProduct(e){this.name=e.name,this.measure=e.measure,this.price=e.price,this.count=e.count},async change(e){let t=await r().ajax({url:"/product/"+e.id+"/change",method:"POST",data:{_token:this.token,name:this.name,measure:this.measure,price:this.price,count:this.count},headers:{"X-CSRF-TOKEN":this.token}});this.$store.commit("products",t.products),this.name=null,this.measure=null,this.price=null,this.count=null},async remove(e){let t=await r().ajax({url:"/product/"+e.id+"/remove",method:"POST",data:{_token:this.token},headers:{"X-CSRF-TOKEN":this.token}});this.$store.commit("products",t.products)}},beforeMount(){this.$store.dispatch("products")},beforeUnmount(){this.$store.commit("header",null),this.$store.commit("products",null)}},Z=n(89);const O=(0,Z.Z)($,[["render",x]]);var j=O,D=n(878),M=n(8829),T=n(2575),I=new WeakMap,P=new WeakMap,U=new WeakMap,q=new WeakMap,z=new WeakMap;class E{constructor(e,t){if((0,D.Z)(this,I,{writable:!0,value:void 0}),(0,D.Z)(this,P,{writable:!0,value:void 0}),(0,D.Z)(this,U,{writable:!0,value:void 0}),(0,D.Z)(this,q,{writable:!0,value:void 0}),(0,D.Z)(this,z,{writable:!0,value:void 0}),"string"!=typeof e)throw new Error("path должен быть типом String");(0,T.Z)(this,I,e.startsWith("/")?e:"/".concat(e)),(0,T.Z)(this,P,t)}static new(e="",t){return new E(e,t)}name(e){return"string"==typeof e&&(0,T.Z)(this,U,e),this}children(e=[]){return(0,T.Z)(this,q,e),this}beforeEnter(e){return(0,T.Z)(this,z,e),this}get(){return{path:(0,M.Z)(this,I),name:(0,M.Z)(this,U),component:(0,M.Z)(this,P),children:(0,M.Z)(this,q),beforeEnter:(0,M.Z)(this,z)}}}var F=E,H=[F["new"]("",j).name("welcome").get()],K=H;const N=(0,i.p7)({history:(0,i.PO)(),routes:K});var R=N;function X(e,t,n,o,a,l){const s=(0,d.up)("router-view");return(0,d.wg)(),(0,d.j4)(s)}var Y={name:"App"};const B=(0,Z.Z)(Y,[["render",X]]);var G=B;function A(e,t,n,o,a,l){return(0,d.wg)(),(0,d.iD)("div",{class:(0,c.C_)(["d-flex",n.classes])},[(0,d.WI)(e.$slots,"default")],2)}var Q={name:"FlexComponent",props:["classes"]};const J=(0,Z.Z)(Q,[["render",A]]);var L=J;function ee(e,t,n,o,a,l){const s=(0,d.up)("ButtonComponent"),r=(0,d.up)("WindowComponent");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(s,(0,d.dG)({onShow:t[0]||(t[0]=t=>e.$emit("show")),target:a.id,title:n.title,classes:n.buttonClasses},e.$attrs),{default:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"button")])),_:3},16,["target","title","classes"]),(0,d.Wm)(r,{onSave:t[1]||(t[1]=e=>l.close(!0)),onClose:l.close,id:a.id,title:n.header,classes:n.windowClasses},{default:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"window")])),_:3},8,["onClose","id","title","classes"])],64)}const te=["data-bs-target"];function ne(e,t,n,o,a,l){return(0,d.wg)(),(0,d.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("show")),type:"button",class:(0,c.C_)(["btn",n.classes]),"data-bs-toggle":"modal","data-bs-target":"#"+n.target},[(0,d.WI)(e.$slots,"default")],10,te)}var oe={name:"ButtonComponent",props:["classes","target"]};const ae=(0,Z.Z)(oe,[["render",ne]]);var le=ae;const se=["aria-labelledby"],re={class:"modal-dialog modal-dialog-centered"},ue={class:(0,c.C_)(["modal-content","bg-light","border-light","text-dark"]),style:{"border-radius":"15px"}},ie={class:"modal-header border-secondary border-bottom-0"},ce=["id"],de={class:"modal-body"},me={class:"modal-footer border-top-0"};function pe(e,t,n,o,a,l){const s=(0,d.up)("QuitComponent"),r=(0,d.up)("CloseComponent"),u=(0,d.up)("SaveComponent");return(0,d.wg)(),(0,d.iD)("section",{class:(0,c.C_)(["modal","fade",n.classes]),tabindex:"-1","aria-labelledby":a.id,"aria-hidden":"true"},[(0,d._)("div",re,[(0,d._)("div",ue,[(0,d._)("div",ie,[(0,d._)("h4",{class:"modal-title mb-0",id:a.id},(0,c.zw)(n.title),9,ce),(0,d.Wm)(s,{onClose:t[0]||(t[0]=t=>e.$emit("close"))})]),(0,d._)("div",de,[(0,d.WI)(e.$slots,"default")]),(0,d._)("div",me,[(0,d.Wm)(r,{onClose:t[1]||(t[1]=t=>e.$emit("close"))}),(0,d.Wm)(u,{onSave:t[2]||(t[2]=t=>e.$emit("save"))})])])])],10,se)}function he(e,t,n,o,a,l){return(0,d.wg)(),(0,d.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),type:"button",class:(0,c.C_)(["btn-close",n.classes]),"aria-label":"Закрыть"},null,2)}var be={name:"QuitComponent",props:["classes"],computed:{theme(){return this.$store.state.theme}}};const fe=(0,Z.Z)(be,[["render",he]]);var ve=fe;function we(e,t,n,o,a,l){return(0,d.wg)(),(0,d.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),type:"button",class:(0,c.C_)(["btn","btn-secondary",n.classes]),"aria-label":"Закрыть"}," Закрыть ",2)}var Ce={name:"CloseComponent",props:["classes"]};const _e=(0,Z.Z)(Ce,[["render",we]]);var ge=_e;function ye(e,t,n,o,a,l){return(0,d.wg)(),(0,d.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("save")),type:"button",class:(0,c.C_)(["btn","btn-primary",n.classes])}," Сохранить ",2)}var ke={name:"SaveComponent",props:["classes"]};const Se=(0,Z.Z)(ke,[["render",ye]]);var Ve=Se;const We=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",1,2,3,4,5,6,7,8,9,0];function xe(e="id_",t=60){for(var n=e,o=0;o<t;o++)n+=We[$e(0,We.length-1)];return n}function $e(e=0,t=100){return Math.floor(Math.random()*(t-e))+e}var Ze={name:"WindowComponent",components:{QuitComponent:ve,CloseComponent:ge,SaveComponent:Ve},props:{classes:String,title:String},data(){return{id:xe()}}};const Oe=(0,Z.Z)(Ze,[["render",pe]]);var je=Oe,De={name:"ModalComponent",components:{ButtonComponent:le,WindowComponent:je},props:["title","header","buttonClasses","windowClasses","pripareClose"],data(){return{id:xe()}},methods:{close(e=!1){window.bootstrap.Modal.getInstance(document.getElementById(this.id)).hide(),e&&this.$emit("save")}}};const Me=(0,Z.Z)(De,[["render",ee]]);var Te=Me;const Ie=(0,d._)("span",{class:"visually-hidden"},"Загрузка...",-1),Pe=[Ie];function Ue(e,t,n,o,a,l){const s=(0,d.up)("FlexComponent");return(0,d.wg)(),(0,d.j4)(s,{classes:"justify-content-center"},{default:(0,d.w5)((()=>[(0,d._)("div",(0,d.dG)({class:["spinner-border",n.classes],role:"status"},e.$attrs),Pe,16)])),_:1})}var qe={name:"SinnerComponent",props:["classes"]};const ze=(0,Z.Z)(qe,[["render",Ue]]);var Ee=ze;const Fe=["for"],He=["id","aria-label"];function Ke(e,t,n,o,l,s){return(0,d.wg)(),(0,d.iD)(d.HY,null,[n.label?((0,d.wg)(),(0,d.iD)("label",{key:0,for:l.id,class:"form-label"},(0,c.zw)(n.label),9,Fe)):(0,d.kq)("",!0),(0,d.wy)((0,d._)("select",(0,d.dG)({"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected=e),onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",l.selected)),id:n.label,class:["form-select",n.classes],"aria-label":n.label},e.$attrs),[(0,d.WI)(e.$slots,"default")],16,He),[[a.bM,l.selected]])],64)}var Ne={name:"SelectComponent",props:["classes","label","modelValue"],data(){return{id:xe(),selected:this.modelValue}},emits:["update:modelValue"]};const Re=(0,Z.Z)(Ne,[["render",Ke]]);var Xe=Re;const Ye=["for"],Be=["id","aria-describedby"],Ge=["id"];function Ae(e,t,n,o,l,s){return(0,d.wg)(),(0,d.iD)(d.HY,null,[n.label?((0,d.wg)(),(0,d.iD)("label",{key:0,for:l.id,class:(0,c.C_)(["form-label","text-start","w-100"])},(0,c.zw)(n.label),9,Ye)):(0,d.kq)("",!0),(0,d.wy)((0,d._)("input",(0,d.dG)({"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:["form-control","form-control-lg","bg-light","text-dark","border-dark",n.classes],id:l.id,"aria-describedby":l.aria},e.$attrs),null,16,Be),[[a.YZ,s.value]]),n.small?((0,d.wg)(),(0,d.iD)("small",{key:1,id:l.aria,class:"form-text text-muted"},(0,c.zw)(n.small),9,Ge)):(0,d.kq)("",!0)],64)}var Qe={name:"InputComponent",data(){return{id:xe(),aria:xe()}},props:["label","small","classes","modelValue"],emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};const Je=(0,Z.Z)(Qe,[["render",Ae]]);var Le=Je;const et={class:"input-group"};function tt(e,t,n,o,l,s){return(0,d.wg)(),(0,d.iD)("div",{class:(0,c.C_)(["form-inline",n.classes])},[(0,d._)("div",et,[(0,d.wy)((0,d._)("input",{type:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.query=e),name:"search",placeholder:"Поиск",class:(0,c.C_)(["form-control","bg-light","border-dark","text-dark"]),autocomplete:"off",required:""},null,512),[[a.nr,l.query]]),(0,d._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>s.search&&s.search(...e)),class:(0,c.C_)(["btn","btn-dark","search-icon"])},"🔍")])],2)}var nt={name:"SearchComponent",props:["classes"],data(){return{query:""}},computed:{token(){return this.$store.state.token}},methods:{async search(){let e=await r().ajax({url:"/search",method:"POST",data:{_token:this.token,q:this.query},headers:{"X-CSRF-TOKEN":this.token}});this.$store.commit("products",JSON.parse(e.products))}}};const ot=(0,Z.Z)(nt,[["render",tt],["__scopeId","data-v-3ed25f88"]]);var at=ot;window.bootstrap=u;const lt=(0,l.MT)({state(){return{header:null,products:null,token:r()('meta[name="csrf-token"]').attr("content")}},mutations:{header(e,t){e.header=(0,o.iH)(t)},products(e,t){e.products=t?(0,o.qj)(t):(0,o.iH)(t)},token(e,t){e.token=(0,o.iH)(t),r()('meta[name="csrf-token"]').attr("content",t)}},actions:{async products(e){let t=await r().ajax({url:"/",method:"POST",data:{_token:e.state.token},headers:{"X-CSRF-TOKEN":e.state.token}});e.commit("header",t.header),e.commit("products",t.products)}}}),st=(0,a.ri)(G);st.config.unwrapInjectedRef=!0,st.use(R),st.use(lt),st.component("FlexComponent",L),st.component("ModalComponent",Te),st.component("SpinnerComponent",Ee),st.component("SelectComponent",Xe),st.component("InputComponent",Le),st.component("SearchComponent",at),st.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],l=e[c][2];for(var r=!0,u=0;u<o.length;u++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(r=!1,l<s&&(s=l));if(r){e.splice(c--,1);var i=a();void 0!==i&&(t=i)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,s=o[0],r=o[1],u=o[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(u)var c=u(n)}for(t&&t(o);i<s.length;i++)l=s[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},o=self["webpackChunk"]=self["webpackChunk"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5569)}));o=n.O(o)})();
//# sourceMappingURL=app.366366ca.js.map